{
  "name": "Haunted House",
  "description": "Explore a Victorian mansion filled with restless spirits. Each room holds secrets, dangers, and the key to putting the ghosts to rest.",
  "states": [
    {
      "name": "foyer",
      "description": "The grand entrance. Cobwebs drape the chandelier.",
      "onEnter": []
    },
    {
      "name": "library",
      "description": "Floor to ceiling books. Some glow faintly.",
      "onEnter": [{ "resource": "knowledge", "operation": "+", "value": "2" }]
    },
    {
      "name": "kitchen",
      "description": "Pots rattle on their own. Cold spots everywhere.",
      "onEnter": [{ "resource": "dread", "operation": "+", "value": "3" }]
    },
    {
      "name": "bedroom",
      "description": "A child's room. The rocking chair moves by itself.",
      "onEnter": [{ "resource": "dread", "operation": "+", "value": "5" }]
    },
    {
      "name": "attic",
      "description": "Dusty trunks and old portraits with watching eyes.",
      "onEnter": [{ "resource": "knowledge", "operation": "+", "value": "3" }]
    },
    {
      "name": "basement",
      "description": "Stone walls drip with moisture. Something moans below.",
      "onEnter": [{ "resource": "dread", "operation": "+", "value": "8" }]
    },
    {
      "name": "seance_room",
      "description": "Candles, a ouija board, and a circle of salt.",
      "onEnter": []
    }
  ],
  "initialState": "foyer",
  "resources": {
    "courage": { "initial": 80, "min": 0, "max": 100, "label": "Courage" },
    "knowledge": { "initial": 0, "min": 0, "max": 50, "label": "Ghost Knowledge" },
    "dread": { "initial": 5, "min": 0, "max": 100, "label": "Dread" },
    "candles": { "initial": 5, "min": 0, "max": 10, "label": "Candles" },
    "salt": { "initial": 3, "min": 0, "max": 8, "label": "Salt Circles" },
    "spirits_freed": { "initial": 0, "min": 0, "max": 5, "label": "Spirits Freed" }
  },
  "actions": {
    "foyer": [
      {
        "name": "go_library",
        "label": "Enter Library",
        "description": "Head to the dusty library.",
        "effects": [{ "resource": "candles", "operation": "-", "value": "1" }],
        "transition": "library"
      },
      {
        "name": "go_kitchen",
        "label": "Enter Kitchen",
        "description": "Follow the rattling sounds.",
        "effects": [{ "resource": "courage", "operation": "-", "value": "3" }],
        "transition": "kitchen"
      },
      {
        "name": "light_candle",
        "label": "Light a Candle",
        "description": "Push back the darkness.",
        "effects": [
          { "resource": "dread", "operation": "-", "value": "5" },
          { "resource": "candles", "operation": "-", "value": "1" }
        ]
      }
    ],
    "library": [
      {
        "name": "read_journal",
        "label": "Read Old Journal",
        "description": "A diary reveals the house's history.",
        "effects": [
          { "resource": "knowledge", "operation": "+", "value": "random(3,6)" },
          { "resource": "courage", "operation": "-", "value": "random(2,5)" }
        ]
      },
      {
        "name": "find_ritual",
        "label": "Find Ritual Instructions",
        "description": "Discover how to free the spirits.",
        "condition": { "resource": "knowledge", "operator": ">=", "value": "10" },
        "effects": [
          { "resource": "knowledge", "operation": "+", "value": "5" },
          { "resource": "salt", "operation": "+", "value": "1" }
        ]
      },
      {
        "name": "return_foyer",
        "label": "Return to Foyer",
        "description": "Go back to the entrance.",
        "effects": [],
        "transition": "foyer"
      }
    ],
    "kitchen": [
      {
        "name": "investigate_cold",
        "label": "Investigate Cold Spot",
        "description": "Touch the freezing air.",
        "effects": [
          { "resource": "dread", "operation": "+", "value": "random(3,6)" },
          { "resource": "knowledge", "operation": "+", "value": "random(2,4)" }
        ]
      },
      {
        "name": "use_salt",
        "label": "Lay Salt Circle",
        "description": "Protect yourself from the entity.",
        "condition": { "resource": "salt", "operator": ">=", "value": "1" },
        "effects": [
          { "resource": "salt", "operation": "-", "value": "1" },
          { "resource": "spirits_freed", "operation": "+", "value": "1" },
          { "resource": "dread", "operation": "-", "value": "5" }
        ],
        "transition": "foyer"
      },
      {
        "name": "flee",
        "label": "Flee the Kitchen",
        "description": "Run back to safety.",
        "effects": [{ "resource": "courage", "operation": "-", "value": "5" }],
        "transition": "foyer"
      }
    ],
    "bedroom": [
      {
        "name": "comfort_spirit",
        "label": "Comfort the Spirit",
        "description": "Speak gently to the ghostly child.",
        "condition": { "resource": "knowledge", "operator": ">=", "value": "15" },
        "effects": [
          { "resource": "spirits_freed", "operation": "+", "value": "1" },
          { "resource": "courage", "operation": "+", "value": "10" },
          { "resource": "dread", "operation": "-", "value": "8" }
        ],
        "transition": "foyer"
      },
      {
        "name": "search_toys",
        "label": "Search the Toys",
        "description": "Look through the old playthings.",
        "effects": [
          { "resource": "knowledge", "operation": "+", "value": "random(2,5)" },
          { "resource": "dread", "operation": "+", "value": "random(3,5)" }
        ]
      }
    ],
    "attic": [
      {
        "name": "open_trunk",
        "label": "Open Old Trunk",
        "description": "Something is sealed inside.",
        "effects": [
          { "resource": "knowledge", "operation": "+", "value": "random(4,8)" },
          { "resource": "dread", "operation": "+", "value": "random(3,6)" },
          { "resource": "candles", "operation": "+", "value": "random(0,2)" }
        ]
      },
      {
        "name": "study_portraits",
        "label": "Study Portraits",
        "description": "The eyes in the paintings follow you.",
        "effects": [
          { "resource": "knowledge", "operation": "+", "value": "random(3,5)" },
          { "resource": "courage", "operation": "-", "value": "random(3,5)" }
        ]
      },
      {
        "name": "descend",
        "label": "Go Downstairs",
        "description": "Return to the main floor.",
        "effects": [],
        "transition": "foyer"
      }
    ],
    "basement": [
      {
        "name": "confront_entity",
        "label": "Confront the Entity",
        "description": "Face the strongest spirit head on.",
        "condition": { "resource": "knowledge", "operator": ">=", "value": "25" },
        "effects": [
          { "resource": "spirits_freed", "operation": "+", "value": "2" },
          { "resource": "courage", "operation": "-", "value": "random(10,20)" },
          { "resource": "dread", "operation": "-", "value": "15" }
        ],
        "transition": "foyer"
      },
      {
        "name": "explore_crypt",
        "label": "Explore the Crypt",
        "description": "Descend deeper into the foundations.",
        "effects": [
          { "resource": "knowledge", "operation": "+", "value": "random(5,10)" },
          { "resource": "dread", "operation": "+", "value": "random(8,12)" },
          { "resource": "courage", "operation": "-", "value": "random(5,10)" }
        ]
      },
      {
        "name": "run_upstairs",
        "label": "Run Upstairs",
        "description": "Get out of the basement.",
        "effects": [{ "resource": "courage", "operation": "-", "value": "5" }],
        "transition": "foyer"
      }
    ],
    "seance_room": [
      {
        "name": "perform_seance",
        "label": "Perform the Seance",
        "description": "Attempt to contact and free the remaining spirits.",
        "condition": { "resource": "knowledge", "operator": ">=", "value": "30" },
        "effects": [
          { "resource": "spirits_freed", "operation": "+", "value": "random(1,3)" },
          { "resource": "courage", "operation": "-", "value": "random(10,15)" },
          { "resource": "dread", "operation": "-", "value": "10" }
        ]
      },
      {
        "name": "prepare_ritual",
        "label": "Prepare the Ritual",
        "description": "Set up candles and salt for the seance.",
        "effects": [
          { "resource": "candles", "operation": "-", "value": "2" },
          { "resource": "salt", "operation": "-", "value": "1" },
          { "resource": "knowledge", "operation": "+", "value": "5" }
        ]
      }
    ]
  },
  "transitions": [
    {
      "from": "foyer",
      "to": "bedroom",
      "condition": { "resource": "knowledge", "operator": ">=", "value": "8" },
      "auto": false
    },
    {
      "from": "foyer",
      "to": "attic",
      "condition": { "resource": "knowledge", "operator": ">=", "value": "12" },
      "auto": false
    },
    {
      "from": "foyer",
      "to": "basement",
      "condition": { "resource": "knowledge", "operator": ">=", "value": "18" },
      "auto": false
    },
    {
      "from": "foyer",
      "to": "seance_room",
      "condition": { "resource": "spirits_freed", "operator": ">=", "value": "3" },
      "auto": true
    }
  ],
  "winCondition": { "resource": "spirits_freed", "operator": ">=", "value": "5" },
  "loseCondition": { "resource": "courage", "operator": "<=", "value": "0" },
  "theme": {
    "palette": "gothic-grey",
    "stateDescriptions": {
      "foyer": { "label": "Grand Foyer", "icon": "door" },
      "library": { "label": "Haunted Library", "icon": "book" },
      "kitchen": { "label": "Cold Kitchen", "icon": "snowflake" },
      "bedroom": { "label": "Child's Room", "icon": "moon" },
      "attic": { "label": "Dusty Attic", "icon": "box" },
      "basement": { "label": "Dark Basement", "icon": "skull" },
      "seance_room": { "label": "Seance Room", "icon": "sparkle" }
    },
    "resourceIcons": {
      "courage": "shield",
      "knowledge": "book",
      "dread": "ghost",
      "candles": "flame",
      "salt": "circle",
      "spirits_freed": "sparkle"
    }
  }
}
