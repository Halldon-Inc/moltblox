{
  "name": "Escape Room",
  "description": "Locked in a series of themed rooms with puzzles to solve. Find clues, combine items, and unlock each door before time runs out.",
  "states": [
    {
      "name": "locked_room_1",
      "description": "A dimly lit room with a locked door and scattered objects.",
      "onEnter": []
    },
    {
      "name": "puzzle_station",
      "description": "A table covered in puzzle pieces and mechanisms.",
      "onEnter": []
    },
    {
      "name": "hidden_passage",
      "description": "A secret alcove behind a bookshelf.",
      "onEnter": [{ "resource": "clues", "operation": "+", "value": "2" }]
    },
    {
      "name": "locked_room_2",
      "description": "A more elaborate room with electronic locks.",
      "onEnter": []
    },
    {
      "name": "cipher_wall",
      "description": "A wall covered in symbols and ciphers.",
      "onEnter": []
    },
    { "name": "final_room", "description": "The last chamber. One lock remains.", "onEnter": [] },
    {
      "name": "freedom",
      "description": "The exit door swings open. Daylight floods in.",
      "onEnter": []
    }
  ],
  "initialState": "locked_room_1",
  "resources": {
    "time": { "initial": 60, "min": 0, "max": 60, "label": "Minutes Left" },
    "clues": { "initial": 0, "min": 0, "max": 20, "label": "Clues" },
    "keys": { "initial": 0, "min": 0, "max": 5, "label": "Keys" },
    "items": { "initial": 0, "min": 0, "max": 10, "label": "Items" },
    "stress": { "initial": 10, "min": 0, "max": 100, "label": "Stress" }
  },
  "actions": {
    "locked_room_1": [
      {
        "name": "search_drawers",
        "label": "Search Drawers",
        "description": "Open every drawer in the room.",
        "effects": [
          { "resource": "items", "operation": "+", "value": "random(1,3)" },
          { "resource": "time", "operation": "-", "value": "3" }
        ]
      },
      {
        "name": "examine_lock",
        "label": "Examine the Lock",
        "description": "Study the mechanism on the door.",
        "effects": [
          { "resource": "clues", "operation": "+", "value": "random(1,3)" },
          { "resource": "time", "operation": "-", "value": "2" }
        ]
      },
      {
        "name": "check_walls",
        "label": "Check the Walls",
        "description": "Look for hidden panels or markings.",
        "effects": [
          { "resource": "clues", "operation": "+", "value": "random(0,2)" },
          { "resource": "time", "operation": "-", "value": "2" }
        ],
        "transition": "hidden_passage"
      },
      {
        "name": "try_puzzle",
        "label": "Attempt Puzzle",
        "description": "Move to the puzzle station.",
        "effects": [{ "resource": "time", "operation": "-", "value": "1" }],
        "transition": "puzzle_station"
      }
    ],
    "puzzle_station": [
      {
        "name": "solve_mechanical",
        "label": "Solve Mechanism",
        "description": "Work the gears and levers.",
        "effects": [
          { "resource": "clues", "operation": "+", "value": "random(2,4)" },
          { "resource": "time", "operation": "-", "value": "random(3,6)" },
          { "resource": "stress", "operation": "+", "value": "random(3,5)" }
        ]
      },
      {
        "name": "combine_items",
        "label": "Combine Items",
        "description": "Try fitting items together.",
        "condition": { "resource": "items", "operator": ">=", "value": "2" },
        "effects": [
          { "resource": "items", "operation": "-", "value": "2" },
          { "resource": "keys", "operation": "+", "value": "1" },
          { "resource": "time", "operation": "-", "value": "3" }
        ]
      },
      {
        "name": "back_to_room",
        "label": "Return to Room",
        "description": "Go back to search more.",
        "effects": [],
        "transition": "locked_room_1"
      }
    ],
    "hidden_passage": [
      {
        "name": "explore_passage",
        "label": "Explore the Passage",
        "description": "Follow the hidden path.",
        "effects": [
          { "resource": "clues", "operation": "+", "value": "random(2,4)" },
          { "resource": "items", "operation": "+", "value": "random(1,2)" },
          { "resource": "time", "operation": "-", "value": "4" }
        ],
        "transition": "locked_room_1"
      }
    ],
    "locked_room_2": [
      {
        "name": "hack_panel",
        "label": "Hack the Panel",
        "description": "Try to bypass the electronic lock.",
        "effects": [
          { "resource": "clues", "operation": "+", "value": "random(2,4)" },
          { "resource": "time", "operation": "-", "value": "random(3,5)" },
          { "resource": "stress", "operation": "+", "value": "random(3,6)" }
        ]
      },
      {
        "name": "use_key",
        "label": "Use a Key",
        "description": "Try one of your keys on a lock.",
        "condition": { "resource": "keys", "operator": ">=", "value": "1" },
        "effects": [
          { "resource": "keys", "operation": "-", "value": "1" },
          { "resource": "clues", "operation": "+", "value": "3" },
          { "resource": "time", "operation": "-", "value": "1" }
        ]
      },
      {
        "name": "find_cipher",
        "label": "Look for Cipher Clues",
        "description": "Search for coded messages.",
        "effects": [
          { "resource": "clues", "operation": "+", "value": "random(1,3)" },
          { "resource": "time", "operation": "-", "value": "2" }
        ],
        "transition": "cipher_wall"
      }
    ],
    "cipher_wall": [
      {
        "name": "decode",
        "label": "Decode the Cipher",
        "description": "Use clues to crack the code.",
        "condition": { "resource": "clues", "operator": ">=", "value": "10" },
        "effects": [
          { "resource": "keys", "operation": "+", "value": "1" },
          { "resource": "time", "operation": "-", "value": "random(3,5)" },
          { "resource": "stress", "operation": "+", "value": "5" }
        ],
        "transition": "final_room"
      },
      {
        "name": "study_symbols",
        "label": "Study Symbols",
        "description": "Take notes on the patterns.",
        "effects": [
          { "resource": "clues", "operation": "+", "value": "random(2,4)" },
          { "resource": "time", "operation": "-", "value": "3" }
        ]
      }
    ],
    "final_room": [
      {
        "name": "final_unlock",
        "label": "Unlock Final Door",
        "description": "Use everything you have gathered.",
        "condition": { "resource": "keys", "operator": ">=", "value": "3" },
        "effects": [{ "resource": "clues", "operation": "+", "value": "5" }],
        "transition": "freedom"
      },
      {
        "name": "search_final",
        "label": "Search This Room",
        "description": "There must be something here to help.",
        "effects": [
          { "resource": "items", "operation": "+", "value": "random(1,2)" },
          { "resource": "clues", "operation": "+", "value": "random(1,3)" },
          { "resource": "time", "operation": "-", "value": "3" }
        ]
      }
    ],
    "freedom": [
      {
        "name": "celebrate",
        "label": "You Escaped!",
        "description": "Walk into the light.",
        "effects": [{ "resource": "stress", "operation": "-", "value": "50" }]
      }
    ]
  },
  "transitions": [
    {
      "from": "locked_room_1",
      "to": "locked_room_2",
      "condition": { "resource": "keys", "operator": ">=", "value": "1" },
      "auto": false
    },
    {
      "from": "locked_room_2",
      "to": "final_room",
      "condition": { "resource": "clues", "operator": ">=", "value": "12" },
      "auto": false
    }
  ],
  "winCondition": { "resource": "clues", "operator": ">=", "value": "18" },
  "loseCondition": { "resource": "time", "operator": "<=", "value": "0" },
  "theme": {
    "palette": "mystery-amber",
    "stateDescriptions": {
      "locked_room_1": { "label": "Room 1", "icon": "lock" },
      "puzzle_station": { "label": "Puzzle Table", "icon": "puzzle" },
      "hidden_passage": { "label": "Secret Path", "icon": "key" },
      "locked_room_2": { "label": "Room 2", "icon": "lock" },
      "cipher_wall": { "label": "Cipher Wall", "icon": "code" },
      "final_room": { "label": "Final Room", "icon": "door" },
      "freedom": { "label": "Freedom!", "icon": "sun" }
    },
    "resourceIcons": {
      "time": "clock",
      "clues": "search",
      "keys": "key",
      "items": "package",
      "stress": "alert"
    }
  }
}
