{
  "name": "Racing",
  "description": "Manage a racing team through a tournament season. Upgrade your car, hire mechanics, and make split-second decisions on the track.",
  "states": [
    {
      "name": "garage",
      "description": "Your team's garage. Tinker with the car.",
      "onEnter": []
    },
    {
      "name": "qualifying",
      "description": "Set your grid position for the race.",
      "onEnter": []
    },
    {
      "name": "race_start",
      "description": "Lights go out. Engines roar.",
      "onEnter": []
    },
    {
      "name": "mid_race",
      "description": "Battling for position in the pack.",
      "onEnter": [
        {
          "resource": "tire_wear",
          "operation": "+",
          "value": "random(3,6)"
        }
      ]
    },
    {
      "name": "pit_stop",
      "description": "Pit crew swarms the car. Fresh tires and fuel.",
      "onEnter": [
        {
          "resource": "tire_wear",
          "operation": "-",
          "value": "30"
        }
      ]
    },
    {
      "name": "final_lap",
      "description": "Last lap. Everything on the line.",
      "onEnter": []
    }
  ],
  "initialState": "garage",
  "resources": {
    "position": {
      "initial": 10,
      "min": 1,
      "max": 20,
      "label": "Grid Position"
    },
    "speed": {
      "initial": 50,
      "min": 0,
      "max": 100,
      "label": "Speed Rating"
    },
    "tire_wear": {
      "initial": 0,
      "min": 0,
      "max": 100,
      "label": "Tire Wear"
    },
    "fuel": {
      "initial": 100,
      "min": 0,
      "max": 100,
      "label": "Fuel"
    },
    "car_hp": {
      "initial": 80,
      "min": 0,
      "max": 100,
      "label": "Car Health"
    },
    "money": {
      "initial": 30,
      "min": 0,
      "max": 200,
      "label": "Prize Money"
    }
  },
  "actions": {
    "garage": [
      {
        "name": "upgrade_engine",
        "label": "Upgrade Engine",
        "description": "Boost top speed.",
        "effects": [
          {
            "resource": "speed",
            "operation": "+",
            "value": "random(5,10)"
          },
          {
            "resource": "money",
            "operation": "-",
            "value": "10"
          }
        ]
      },
      {
        "name": "repair_car",
        "label": "Repair Car",
        "description": "Fix damage from previous races.",
        "effects": [
          {
            "resource": "car_hp",
            "operation": "+",
            "value": "random(10,20)"
          },
          {
            "resource": "money",
            "operation": "-",
            "value": "5"
          }
        ]
      },
      {
        "name": "go_qualifying",
        "label": "Go to Qualifying",
        "description": "Hit the track for time trials.",
        "effects": [],
        "transition": "qualifying"
      }
    ],
    "qualifying": [
      {
        "name": "safe_lap",
        "label": "Safe Lap",
        "description": "Drive carefully for a clean time.",
        "effects": [
          {
            "resource": "position",
            "operation": "-",
            "value": "random(1,3)"
          },
          {
            "resource": "tire_wear",
            "operation": "+",
            "value": "5"
          }
        ]
      },
      {
        "name": "push_limit",
        "label": "Push to the Limit",
        "description": "Risk everything for pole position.",
        "effects": [
          {
            "resource": "position",
            "operation": "-",
            "value": "random(3,6)"
          },
          {
            "resource": "tire_wear",
            "operation": "+",
            "value": "10"
          },
          {
            "resource": "car_hp",
            "operation": "-",
            "value": "random(3,5)"
          }
        ]
      },
      {
        "name": "start_race",
        "label": "Race Day",
        "description": "Line up on the grid.",
        "effects": [],
        "transition": "race_start"
      }
    ],
    "race_start": [
      {
        "name": "aggressive_start",
        "label": "Aggressive Launch",
        "description": "Floor it and weave through traffic.",
        "effects": [
          {
            "resource": "position",
            "operation": "-",
            "value": "random(2,4)"
          },
          {
            "resource": "fuel",
            "operation": "-",
            "value": "8"
          },
          {
            "resource": "car_hp",
            "operation": "-",
            "value": "random(3,8)"
          }
        ],
        "transition": "mid_race"
      },
      {
        "name": "cautious_start",
        "label": "Cautious Start",
        "description": "Avoid first-lap chaos.",
        "effects": [
          {
            "resource": "position",
            "operation": "-",
            "value": "random(0,2)"
          },
          {
            "resource": "fuel",
            "operation": "-",
            "value": "5"
          }
        ],
        "transition": "mid_race"
      }
    ],
    "mid_race": [
      {
        "name": "attack",
        "label": "Attack Position",
        "description": "Push to overtake the car ahead.",
        "effects": [
          {
            "resource": "position",
            "operation": "-",
            "value": "random(1,3)"
          },
          {
            "resource": "tire_wear",
            "operation": "+",
            "value": "random(5,8)"
          },
          {
            "resource": "fuel",
            "operation": "-",
            "value": "random(5,8)"
          }
        ]
      },
      {
        "name": "defend",
        "label": "Defend Position",
        "description": "Hold your line and save tires.",
        "effects": [
          {
            "resource": "tire_wear",
            "operation": "+",
            "value": "random(2,4)"
          },
          {
            "resource": "fuel",
            "operation": "-",
            "value": "random(3,5)"
          }
        ]
      },
      {
        "name": "pit",
        "label": "Pit Stop",
        "description": "Come in for fresh tires.",
        "effects": [
          {
            "resource": "position",
            "operation": "+",
            "value": "random(2,4)"
          }
        ],
        "transition": "pit_stop"
      }
    ],
    "pit_stop": [
      {
        "name": "quick_stop",
        "label": "Quick Stop",
        "description": "Tires only. Get back out fast.",
        "effects": [
          {
            "resource": "fuel",
            "operation": "+",
            "value": "random(15,25)"
          }
        ],
        "transition": "mid_race"
      },
      {
        "name": "full_service",
        "label": "Full Service",
        "description": "Tires, fuel, and minor repairs.",
        "effects": [
          {
            "resource": "fuel",
            "operation": "+",
            "value": "random(30,40)"
          },
          {
            "resource": "car_hp",
            "operation": "+",
            "value": "random(5,10)"
          },
          {
            "resource": "position",
            "operation": "+",
            "value": "random(1,3)"
          }
        ],
        "transition": "mid_race"
      }
    ],
    "final_lap": [
      {
        "name": "send_it",
        "label": "Send It!",
        "description": "Maximum attack for the final lap.",
        "effects": [
          {
            "resource": "position",
            "operation": "-",
            "value": "random(2,4)"
          },
          {
            "resource": "tire_wear",
            "operation": "+",
            "value": "random(8,12)"
          },
          {
            "resource": "fuel",
            "operation": "-",
            "value": "random(8,12)"
          }
        ]
      },
      {
        "name": "manage_gap",
        "label": "Manage the Gap",
        "description": "Protect your position to the finish.",
        "effects": [
          {
            "resource": "tire_wear",
            "operation": "+",
            "value": "random(3,5)"
          },
          {
            "resource": "fuel",
            "operation": "-",
            "value": "random(3,5)"
          }
        ]
      }
    ]
  },
  "transitions": [
    {
      "from": "mid_race",
      "to": "final_lap",
      "condition": {
        "resource": "fuel",
        "operator": "<=",
        "value": "20"
      },
      "auto": true
    },
    {
      "from": "mid_race",
      "to": "pit_stop",
      "condition": {
        "resource": "tire_wear",
        "operator": ">=",
        "value": "70"
      },
      "auto": true
    }
  ],
  "winCondition": {
    "resource": "position",
    "operator": "<=",
    "value": "3"
  },
  "loseCondition": {
    "resource": "car_hp",
    "operator": "<=",
    "value": "0"
  },
  "theme": {
    "palette": "asphalt-black",
    "stateDescriptions": {
      "garage": {
        "label": "Garage",
        "icon": "wrench"
      },
      "qualifying": {
        "label": "Qualifying",
        "icon": "clock"
      },
      "race_start": {
        "label": "Race Start",
        "icon": "flag"
      },
      "mid_race": {
        "label": "Racing",
        "icon": "zap"
      },
      "pit_stop": {
        "label": "Pit Stop",
        "icon": "wrench"
      },
      "final_lap": {
        "label": "Final Lap!",
        "icon": "flag"
      }
    },
    "resourceIcons": {
      "position": "hash",
      "speed": "zap",
      "tire_wear": "circle",
      "fuel": "droplet",
      "car_hp": "shield",
      "money": "coin"
    }
  }
}
