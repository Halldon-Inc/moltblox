{
  "name": "Meta Strategy",
  "description": "Compete in a strategy game where you can also modify the strategy layer itself. Invest in upgrading your decision engine while opponents play by fixed rules.",
  "states": [
    {
      "name": "planning",
      "description": "Review the board and plan your next set of moves.",
      "onEnter": []
    },
    {
      "name": "execution",
      "description": "Carry out your planned strategy on the field.",
      "onEnter": []
    },
    {
      "name": "meta_layer",
      "description": "Step outside the game to modify your own strategy system.",
      "onEnter": [{ "resource": "meta_points", "operation": "+", "value": "2" }]
    },
    {
      "name": "opponent_turn",
      "description": "Your opponent makes their move. React or hold steady.",
      "onEnter": [{ "resource": "threat", "operation": "+", "value": "random(2,5)" }]
    },
    {
      "name": "upgrade_phase",
      "description": "Apply meta-upgrades to your strategic toolkit.",
      "onEnter": []
    },
    {
      "name": "endgame",
      "description": "The final confrontation. All strategies converge.",
      "onEnter": []
    }
  ],
  "initialState": "planning",
  "resources": {
    "territory": { "initial": 10, "min": 0, "max": 100, "label": "Territory" },
    "forces": { "initial": 20, "min": 0, "max": 50, "label": "Forces" },
    "meta_points": { "initial": 0, "min": 0, "max": 30, "label": "Meta Points" },
    "strategy_level": { "initial": 1, "min": 1, "max": 10, "label": "Strategy Level" },
    "threat": { "initial": 5, "min": 0, "max": 50, "label": "Opponent Threat" },
    "intel": { "initial": 0, "min": 0, "max": 30, "label": "Intelligence" }
  },
  "actions": {
    "planning": [
      {
        "name": "scout",
        "label": "Scout Ahead",
        "description": "Gather intelligence on the opponent.",
        "effects": [
          { "resource": "intel", "operation": "+", "value": "random(3,6)" },
          { "resource": "forces", "operation": "-", "value": "1" }
        ]
      },
      {
        "name": "mobilize",
        "label": "Mobilize Forces",
        "description": "Prepare troops for the next push.",
        "effects": [{ "resource": "forces", "operation": "+", "value": "random(3,6)" }]
      },
      {
        "name": "execute_plan",
        "label": "Execute Plan",
        "description": "Move from planning to action.",
        "effects": [],
        "transition": "execution"
      },
      {
        "name": "go_meta",
        "label": "Enter Meta Layer",
        "description": "Step above the game to modify your strategy system.",
        "effects": [],
        "transition": "meta_layer"
      }
    ],
    "execution": [
      {
        "name": "attack",
        "label": "Launch Attack",
        "description": "Push into enemy territory.",
        "effects": [
          { "resource": "territory", "operation": "+", "value": "random(3,8)" },
          { "resource": "forces", "operation": "-", "value": "random(3,6)" },
          { "resource": "threat", "operation": "-", "value": "random(2,4)" }
        ],
        "transition": "opponent_turn"
      },
      {
        "name": "fortify",
        "label": "Fortify Position",
        "description": "Strengthen your held territory.",
        "effects": [
          { "resource": "territory", "operation": "+", "value": "2" },
          { "resource": "threat", "operation": "-", "value": "3" }
        ],
        "transition": "opponent_turn"
      },
      {
        "name": "tactical_retreat",
        "label": "Strategic Withdrawal",
        "description": "Pull back to save forces for a better moment.",
        "effects": [
          { "resource": "territory", "operation": "-", "value": "random(1,3)" },
          { "resource": "forces", "operation": "+", "value": "random(2,4)" }
        ],
        "transition": "opponent_turn"
      }
    ],
    "meta_layer": [
      {
        "name": "analyze_meta",
        "label": "Analyze the Meta",
        "description": "Study the game system itself for exploits.",
        "effects": [
          { "resource": "meta_points", "operation": "+", "value": "random(3,5)" },
          { "resource": "intel", "operation": "+", "value": "3" }
        ]
      },
      {
        "name": "upgrade_strategy",
        "label": "Upgrade Strategy",
        "description": "Apply meta knowledge to improve your approach.",
        "condition": { "resource": "meta_points", "operator": ">=", "value": "5" },
        "effects": [
          { "resource": "meta_points", "operation": "-", "value": "5" },
          { "resource": "strategy_level", "operation": "+", "value": "1" }
        ],
        "transition": "upgrade_phase"
      },
      {
        "name": "return_to_game",
        "label": "Return to Game",
        "description": "Go back to the regular strategy layer.",
        "effects": [],
        "transition": "planning"
      }
    ],
    "opponent_turn": [
      {
        "name": "react",
        "label": "React to Move",
        "description": "Counter the opponent's action.",
        "effects": [
          { "resource": "threat", "operation": "-", "value": "random(2,5)" },
          { "resource": "forces", "operation": "-", "value": "random(1,3)" }
        ],
        "transition": "planning"
      },
      {
        "name": "hold_ground",
        "label": "Hold Ground",
        "description": "Maintain position and absorb the attack.",
        "effects": [
          { "resource": "territory", "operation": "-", "value": "random(0,3)" },
          { "resource": "forces", "operation": "-", "value": "random(0,2)" }
        ],
        "transition": "planning"
      }
    ],
    "upgrade_phase": [
      {
        "name": "apply_upgrade",
        "label": "Apply Upgrade",
        "description": "Your improved strategy takes effect.",
        "effects": [
          { "resource": "forces", "operation": "+", "value": "5" },
          { "resource": "intel", "operation": "+", "value": "5" }
        ],
        "transition": "planning"
      }
    ],
    "endgame": [
      {
        "name": "final_push",
        "label": "Final Push",
        "description": "Commit all resources to the final battle.",
        "effects": [
          { "resource": "territory", "operation": "+", "value": "random(10,20)" },
          { "resource": "forces", "operation": "-", "value": "random(5,10)" }
        ]
      }
    ]
  },
  "transitions": [
    {
      "from": "planning",
      "to": "endgame",
      "condition": { "resource": "territory", "operator": ">=", "value": "70" },
      "auto": true
    },
    {
      "from": "opponent_turn",
      "to": "endgame",
      "condition": { "resource": "threat", "operator": ">=", "value": "40" },
      "auto": true
    }
  ],
  "winCondition": { "resource": "territory", "operator": ">=", "value": "80" },
  "loseCondition": { "resource": "forces", "operator": "<=", "value": "0" },
  "theme": {
    "palette": "command-green",
    "stateDescriptions": {
      "planning": { "label": "War Room", "icon": "map" },
      "execution": { "label": "Battlefield", "icon": "swords" },
      "meta_layer": { "label": "Meta Layer", "icon": "layers" },
      "opponent_turn": { "label": "Enemy Move", "icon": "alert" },
      "upgrade_phase": { "label": "Upgrade Bay", "icon": "arrow-up" },
      "endgame": { "label": "Endgame", "icon": "flag" }
    },
    "resourceIcons": {
      "territory": "map",
      "forces": "shield",
      "meta_points": "sparkle",
      "strategy_level": "brain",
      "threat": "alert",
      "intel": "eye"
    }
  }
}
