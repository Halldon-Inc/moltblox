{
  "name": "Espionage",
  "description": "Run a spy agency during a cold war. Deploy agents, steal secrets, and undermine rival nations without getting caught.",
  "states": [
    { "name": "agency_hq", "description": "Your intelligence agency headquarters.", "onEnter": [] },
    {
      "name": "field_ops",
      "description": "Agents in the field carrying out missions.",
      "onEnter": []
    },
    { "name": "cyber_division", "description": "Digital espionage and hacking.", "onEnter": [] },
    { "name": "interrogation", "description": "Questioning captured enemy agents.", "onEnter": [] },
    { "name": "safe_house", "description": "A covert meeting location.", "onEnter": [] },
    {
      "name": "blown_cover",
      "description": "An agent's cover has been blown!",
      "onEnter": [
        { "resource": "agents", "operation": "-", "value": "1" },
        { "resource": "heat", "operation": "+", "value": "5" }
      ]
    }
  ],
  "initialState": "agency_hq",
  "resources": {
    "budget": { "initial": 300, "min": 0, "label": "Black Budget" },
    "agents": { "initial": 5, "min": 0, "max": 12, "label": "Active Agents" },
    "intel": { "initial": 0, "min": 0, "label": "Intelligence" },
    "heat": { "initial": 0, "min": 0, "max": 20, "label": "Suspicion" },
    "tech": { "initial": 3, "min": 0, "max": 10, "label": "Tech Level" },
    "assets": { "initial": 1, "min": 0, "max": 8, "label": "Foreign Assets" }
  },
  "actions": {
    "agency_hq": [
      {
        "name": "recruit",
        "label": "Recruit Agent",
        "condition": { "resource": "budget", "operator": ">=", "value": "30" },
        "effects": [
          { "resource": "agents", "operation": "+", "value": "1" },
          { "resource": "budget", "operation": "-", "value": "30" }
        ]
      },
      {
        "name": "research",
        "label": "R&D",
        "condition": { "resource": "budget", "operator": ">=", "value": "25" },
        "effects": [
          { "resource": "tech", "operation": "+", "value": "1" },
          { "resource": "budget", "operation": "-", "value": "25" }
        ]
      },
      {
        "name": "go_field",
        "label": "Deploy Agents",
        "condition": { "resource": "agents", "operator": ">=", "value": "2" },
        "effects": [],
        "transition": "field_ops"
      },
      { "name": "go_cyber", "label": "Cyber Ops", "effects": [], "transition": "cyber_division" },
      { "name": "go_safe", "label": "Visit Safe House", "effects": [], "transition": "safe_house" },
      {
        "name": "reduce_heat",
        "label": "Cover Tracks",
        "condition": { "resource": "budget", "operator": ">=", "value": "20" },
        "effects": [
          { "resource": "heat", "operation": "-", "value": "random(2,5)" },
          { "resource": "budget", "operation": "-", "value": "20" }
        ]
      }
    ],
    "field_ops": [
      {
        "name": "steal_docs",
        "label": "Steal Documents",
        "effects": [
          { "resource": "intel", "operation": "+", "value": "random(5,12)" },
          { "resource": "heat", "operation": "+", "value": "random(2,4)" },
          { "resource": "agents", "operation": "-", "value": "random(0,1)" }
        ]
      },
      {
        "name": "plant_asset",
        "label": "Recruit Foreign Asset",
        "condition": { "resource": "budget", "operator": ">=", "value": "20" },
        "effects": [
          { "resource": "assets", "operation": "+", "value": "1" },
          { "resource": "budget", "operation": "-", "value": "20" },
          { "resource": "heat", "operation": "+", "value": "random(1,3)" }
        ]
      },
      {
        "name": "sabotage",
        "label": "Sabotage Operation",
        "effects": [
          { "resource": "intel", "operation": "+", "value": "random(3,8)" },
          { "resource": "heat", "operation": "+", "value": "random(3,5)" }
        ]
      },
      { "name": "back", "label": "Return to HQ", "effects": [], "transition": "agency_hq" }
    ],
    "cyber_division": [
      {
        "name": "hack",
        "label": "Hack Enemy Systems",
        "condition": { "resource": "tech", "operator": ">=", "value": "3" },
        "effects": [
          { "resource": "intel", "operation": "+", "value": "random(8,15)" },
          { "resource": "heat", "operation": "+", "value": "random(1,4)" },
          { "resource": "tech", "operation": "-", "value": "random(0,1)" }
        ]
      },
      {
        "name": "defend",
        "label": "Cyber Defense",
        "effects": [
          { "resource": "heat", "operation": "-", "value": "random(1,3)" },
          { "resource": "tech", "operation": "+", "value": "random(0,1)" }
        ]
      },
      { "name": "back", "label": "Return to HQ", "effects": [], "transition": "agency_hq" }
    ],
    "interrogation": [
      {
        "name": "question",
        "label": "Question Prisoner",
        "effects": [
          { "resource": "intel", "operation": "+", "value": "random(5,15)" },
          { "resource": "heat", "operation": "+", "value": "random(1,2)" }
        ]
      },
      {
        "name": "turn_agent",
        "label": "Turn Double Agent",
        "condition": { "resource": "budget", "operator": ">=", "value": "15" },
        "effects": [
          { "resource": "assets", "operation": "+", "value": "1" },
          { "resource": "budget", "operation": "-", "value": "15" },
          { "resource": "intel", "operation": "+", "value": "random(3,8)" }
        ],
        "transition": "agency_hq"
      },
      {
        "name": "release",
        "label": "Release and Track",
        "effects": [{ "resource": "intel", "operation": "+", "value": "random(2,6)" }],
        "transition": "agency_hq"
      }
    ],
    "safe_house": [
      {
        "name": "meet_asset",
        "label": "Meet with Asset",
        "condition": { "resource": "assets", "operator": ">=", "value": "1" },
        "effects": [
          { "resource": "intel", "operation": "+", "value": "random(5,10)" },
          { "resource": "heat", "operation": "+", "value": "random(0,2)" }
        ]
      },
      {
        "name": "plan_op",
        "label": "Plan Operation",
        "effects": [{ "resource": "intel", "operation": "+", "value": "random(2,5)" }]
      },
      { "name": "back", "label": "Return to HQ", "effects": [], "transition": "agency_hq" }
    ],
    "blown_cover": [
      {
        "name": "extract",
        "label": "Emergency Extraction",
        "condition": { "resource": "budget", "operator": ">=", "value": "25" },
        "effects": [
          { "resource": "budget", "operation": "-", "value": "25" },
          { "resource": "agents", "operation": "+", "value": "1" },
          { "resource": "heat", "operation": "+", "value": "2" }
        ],
        "transition": "agency_hq"
      },
      {
        "name": "deny",
        "label": "Deny Involvement",
        "effects": [{ "resource": "heat", "operation": "+", "value": "random(1,3)" }],
        "transition": "agency_hq"
      }
    ]
  },
  "transitions": [
    {
      "from": "field_ops",
      "to": "blown_cover",
      "condition": { "resource": "heat", "operator": ">=", "value": "12" },
      "auto": false
    },
    {
      "from": "field_ops",
      "to": "interrogation",
      "condition": { "resource": "agents", "operator": ">=", "value": "4" },
      "auto": false
    }
  ],
  "winCondition": { "resource": "intel", "operator": ">=", "value": "100" },
  "loseCondition": {
    "or": [
      { "resource": "heat", "operator": ">=", "value": "20" },
      { "resource": "agents", "operator": "<=", "value": "0" }
    ]
  },
  "theme": {
    "palette": "shadow-black",
    "stateDescriptions": {
      "agency_hq": { "label": "Agency HQ", "icon": "briefcase" },
      "field_ops": { "label": "Field Ops", "icon": "crosshair" },
      "cyber_division": { "label": "Cyber Division", "icon": "cpu" },
      "interrogation": { "label": "Interrogation", "icon": "message-circle" },
      "safe_house": { "label": "Safe House", "icon": "home" },
      "blown_cover": { "label": "Cover Blown!", "icon": "alert-triangle" }
    },
    "resourceIcons": {
      "budget": "dollar",
      "agents": "user",
      "intel": "file-text",
      "heat": "flame",
      "tech": "cpu",
      "assets": "eye"
    }
  }
}
